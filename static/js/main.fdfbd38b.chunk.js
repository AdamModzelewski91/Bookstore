(this.webpackJsonpksiegarnia_redux=this.webpackJsonpksiegarnia_redux||[]).push([[0],{23:function(e,t,c){},24:function(e,t,c){},25:function(e,t,c){},26:function(e,t,c){},28:function(e,t,c){"use strict";c.r(t);var n=c(1),o=c.n(n),a=c(6),r=c.n(a),i=c(3),s=(c(23),c(24),c(25),c(26),c(2)),u="ADD_BOOK",b="EDIT_BOOK",l="DELETE_BOOK",m="ADD_COMMENT",j="EDIT_COMMENT",d="DELETE_COMMENT",O=c(0),p=function(e){var t=e.title,c=void 0===t?"":t,o=e.author,a=void 0===o?"":o,r=e.category,l=void 0===r?"":r,m=e.price,j=void 0===m?"":m,d=e.publicYear,p=void 0===d?"":d,h=e.pages,f=void 0===h?"":h,x=e.description,v=void 0===x?"":x,g=e.id_book,k=e.callbackEditBook,y=Object(n.useState)(!1),_=Object(s.a)(y,2),N=_[0],S=_[1],C=function(){return S((function(e){return!e}))},A=Object(n.useState)(c),T=Object(s.a)(A,2),E=T[0],R=T[1],D=Object(n.useState)(a),M=Object(s.a)(D,2),w=M[0],Y=M[1],B=Object(n.useState)(l),I=Object(s.a)(B,2),P=I[0],J=I[1],K=Object(n.useState)(j),F=Object(s.a)(K,2),L=F[0],$=F[1],z=Object(n.useState)(p),V=Object(s.a)(z,2),q=V[0],G=V[1],H=Object(n.useState)(f),Q=Object(s.a)(H,2),U=Q[0],W=Q[1],X=Object(n.useState)(v),Z=Object(s.a)(X,2),ee=Z[0],te=Z[1],ce=Object(i.b)(),ne=Object(n.useState)(!1),oe=Object(s.a)(ne,2),ae=oe[0],re=oe[1],ie=Object(n.useState)(!1),se=Object(s.a)(ie,2),ue=se[0],be=se[1],le=Object(n.useState)(!1),me=Object(s.a)(le,2),je=me[0],de=me[1],Oe=Object(n.useState)(!1),pe=Object(s.a)(Oe,2),he=pe[0],fe=pe[1],xe=Object(n.useState)(!1),ve=Object(s.a)(xe,2),ge=ve[0],ke=ve[1],ye=Object(n.useState)(!1),_e=Object(s.a)(ye,2),Ne=_e[0],Se=_e[1],Ce=Object(n.useState)(!1),Ae=Object(s.a)(Ce,2),Te=Ae[0],Ee=Ae[1];Object(n.useEffect)((function(){var e=setTimeout((function(){re(!1),be(!1),de(!1),fe(!1),ke(!1),Se(!1),Ee(!1)}),3e3);return function(){return clearTimeout(e)}}),[ae,ue,je,he,ge,Ne,Te]);return Object(O.jsxs)("div",{className:"form ".concat(N?"active":null),children:[Object(O.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t={title:E,author:w,category:P,price:Number(L),publicYear:Number(q),pages:Number(U),description:ee,id_book:g};(""===E.trim()||E.length<2)&&re(!0),(""===w.trim()||w.length<2)&&be(!0),""===P.trim()&&de(!0),""===L&&fe(!0),(""===q||q>(new Date).getFullYear())&&ke(!0),""===U&&Se(!0),""===ee.trim()||ee.length<20?Ee(!0):(ce(g?function(e){var t=e.title,c=e.author,n=e.category,o=e.price,a=e.publicYear,r=e.pages,i=e.id_book,s=e.description;return{type:b,payload:{title:t,author:c,category:n,price:o,publicYear:a,pages:r,description:s,id_book:i}}}(t):function(e){var t=e.title,c=e.author,n=e.category,o=e.price,a=e.publicYear,r=e.pages,i=e.description;return{type:u,payload:{title:t,author:c,category:n,price:o,publicYear:a,pages:r,description:i,id_book:Math.floor(999999*Math.random())}}}(t)),g&&k(),R(""),Y(""),J(""),$(""),G(""),W(""),te(""),C())},children:[Object(O.jsxs)("div",{className:"wrapp-form",children:[Object(O.jsx)("input",{id:"title",className:ae?"red":null,onChange:function(e){return R(e.target.value)},type:"text",placeholder:ae?"Title to short!":"Title",value:E}),Object(O.jsx)("input",{id:"author",className:ue?"red":null,onChange:function(e){return Y(e.target.value)},type:"text",placeholder:ue?"To short name!":"Author",value:w}),Object(O.jsxs)("div",{className:"wrapp-pack",children:[Object(O.jsx)("input",{className:je?"red":null,onChange:function(e){return J(e.target.value)},type:"text",placeholder:je?"Type a category!":"Category",value:P}),Object(O.jsx)("input",{className:he?"red":null,onChange:function(e){return $(e.target.value)},type:"number",placeholder:he?"Type a price!":"Price ($)",value:L}),Object(O.jsx)("input",{className:ge?"red":null,onChange:function(e){return G(e.target.value)},type:"number",placeholder:ge?"Type a public year!":"Public year",value:q}),Object(O.jsx)("input",{className:Ne?"red":null,onChange:function(e){return W(e.target.value)},type:"number",placeholder:Ne?"Type count of pages!":"Pages",value:U})]}),Object(O.jsx)("textarea",{className:Te?"red":null,onChange:function(e){return te(e.target.value)},type:"text",placeholder:Te?"Type short description (min 20 chars)!":"Description",value:ee})]}),Object(O.jsx)("button",{className:"submit",type:"submit",children:"Add Book"}),Object(O.jsx)("button",{className:"submit cancel",onClick:g?k:C,type:"button",children:"Cancel"})]}),Object(O.jsx)("button",{onClick:C,className:"btnAddForm ".concat(N?"active":""),children:"Adding form"})]})},h=c(8),f=c(11),x=c(4),v={books:[],comments:[]},g=function(e,t){var c=e.books.map((function(e){return e.id_comment!==t.id_comment?e:{title:t.title,author:t.author,category:t.category,price:t.price,publicYear:t.publicYear,pages:t.pages,description:t.description,id_book:e.id_book}}));return Object(x.a)(Object(x.a)({},e),{},{books:c})},k=function(e,t){var c=e.comments.map((function(e){return e.id_comment!==t.id_comment?e:{commentAuthor:t.commentAuthor,commentRate:t.commentRate,comment:t.comment,id_book:t.id_book,id_comment:e.id_comment}}));return Object(x.a)(Object(x.a)({},e),{},{comments:c})},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u:return Object(x.a)(Object(x.a)({},e),{},{books:[].concat(Object(f.a)(e.books),[t.payload])});case l:return{books:e.books.filter((function(e){return e.id_book!==t.payload.id_book})),comments:e.comments.filter((function(e){return e.id_book!==t.payload.id_book}))};case b:return g(e,t.payload);case m:return Object(x.a)(Object(x.a)({},e),{},{comments:[].concat(Object(f.a)(e.comments),[t.payload])});case j:return k(e,t.payload);case d:return Object(x.a)(Object(x.a)({},e),{},{comments:e.comments.filter((function(e){return e.id_comment!==t.payload.id_comment}))});default:return console.warn("missing action type of ".concat(t.type)),e}},_=Object(h.a)({books:y}),N=localStorage.getItem("reduxState")?JSON.parse(localStorage.getItem("reduxState")):{},S=Object(h.b)(_,N);S.subscribe((function(){localStorage.setItem("reduxState",JSON.stringify(S.getState()))}));var C=S,A=function(e){var t=e.commentAuthor,c=void 0===t?"":t,o=e.commentRate,a=void 0===o?"":o,r=e.comment,u=void 0===r?"":r,b=e.callbackAdd,l=e.callbackEdit,d=e.id_book,p=e.id_comment,h=Object(n.useState)(c),f=Object(s.a)(h,2),x=f[0],v=f[1],g=Object(n.useState)(a),k=Object(s.a)(g,2),y=k[0],_=k[1],N=Object(n.useState)(u),S=Object(s.a)(N,2),C=S[0],A=S[1],T=Object(i.b)(),E=Object(n.useState)(!1),R=Object(s.a)(E,2),D=R[0],M=R[1],w=Object(n.useState)(!1),Y=Object(s.a)(w,2),B=Y[0],I=Y[1],P=Object(n.useState)(!1),J=Object(s.a)(P,2),K=J[0],F=J[1],L=Object(n.useState)(!1),$=Object(s.a)(L,2),z=$[0],V=$[1];Object(n.useEffect)((function(){var e=setTimeout((function(){M(!1),I(!1),F(!1),V(!1)}),3e3);return function(){return clearTimeout(e)}}),[D,B,z]);return Object(O.jsx)("div",{className:"form commentRelative",children:Object(O.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t={commentAuthor:x,commentRate:Number(y),comment:C,id_book:d,id_comment:p};(""===x.trim()||x.length<2)&&M(!0),""===y?I(!0):(Number(y)<1||Number(y)>5)&&(I(!0),F(!0),_("")),""===C.trim()||C.length<2?V(!0):(T(p?function(e){var t=e.commentAuthor,c=e.commentRate,n=e.comment,o=e.id_book,a=e.id_comment;return{type:j,payload:{commentAuthor:t,commentRate:c,comment:n,id_book:o,id_comment:a}}}(t):function(e){var t=e.commentAuthor,c=e.commentRate,n=e.comment,o=e.id_book;return{type:m,payload:{commentAuthor:t,commentRate:c,comment:n,id_book:o,id_comment:Math.floor(9999999*Math.random())}}}(t)),p?l():b(),v(""),_(""),A(""))},children:[Object(O.jsxs)("div",{className:"wrapp-form wrapp-form-com",children:[Object(O.jsx)("input",{className:D?"red":null,placeholder:D?"Enter your name!":"Name",onChange:function(e){return v(e.target.value)},type:"text",value:x}),Object(O.jsx)("input",{className:B?"red":null,placeholder:B?K?"It must be from 1 to 5":"Rate it!":"Rate (from 1 to 5)",onChange:function(e){return _(e.target.value)},type:"number",value:y}),Object(O.jsx)("textarea",{className:z?"red":null,placeholder:z?"Type comment! (at least 3 char)":"Comment",onChange:function(e){return A(e.target.value)},type:"text",value:C})]}),Object(O.jsx)("button",{className:"submit submit-com addComment",type:"button",onClick:p?l:b,children:"Cancel"}),Object(O.jsx)("button",{className:"submit submit-com",type:"submit",children:"Public"})]})})},T=function(e){var t=e.commentAuthor,c=e.commentRate,o=e.comment,a=e.id_comment,r=e.id_book,u=Object(n.useState)(!1),b=Object(s.a)(u,2),l=b[0],m=b[1],j=function(){return m((function(e){return!e}))},p=Object(i.b)(),h=l?Object(O.jsx)(A,{commentAuthor:t,commentRate:c,comment:o,callbackEdit:j,id_book:r,id_comment:a}):Object(O.jsxs)("div",{className:"right-corner",children:[Object(O.jsx)("button",{type:"button",onClick:j,children:Object(O.jsx)("i",{className:"fas fa-pencil-alt"})}),Object(O.jsx)("button",{type:"button",onClick:function(){return p(function(e){var t=e.id_comment;return{type:d,payload:{id_comment:t}}}({id_comment:a}))},children:Object(O.jsx)("i",{className:"fas fa-times"})})]});return Object(O.jsxs)("div",{className:"comment",children:[Object(O.jsxs)("div",{className:"wrap",children:[Object(O.jsx)("p",{children:"Name:"}),Object(O.jsx)("h4",{children:t}),Object(O.jsx)("p",{children:"Rate:"}),Object(O.jsx)("h4",{children:c})]}),Object(O.jsx)("p",{className:"textarea",children:o}),h]})},E=function(e){var t=e.title,c=e.author,o=e.category,a=e.price,r=e.publicYear,u=e.id_book,b=e.pages,m=e.description,j=Object(n.useState)(!1),d=Object(s.a)(j,2),h=d[0],f=d[1],x=Object(n.useState)(!1),v=Object(s.a)(x,2),g=v[0],k=v[1],y=function(){return f((function(e){return!e}))},_=function(){return k((function(e){return!e}))},N=Object(i.b)(),S=Object(i.c)((function(e){return e.books})),C=S.comments.map((function(e){return Object(O.jsx)(T,{id_book:e.id_book,id_comment:e.id_comment,commentAuthor:e.commentAuthor,commentRate:e.commentRate,comment:e.comment,toggleElement:y,isVisibleAddComm:h},e.id_comment)})),E=g?Object(O.jsx)(p,{title:t,author:c,category:o,price:a,publicYear:r,pages:b,id_book:u,description:m,callbackEditBook:_}):Object(O.jsxs)("div",{className:"commentBTNs",children:[Object(O.jsxs)("div",{className:"right-corner",children:[Object(O.jsx)("button",{onClick:_,children:Object(O.jsx)("i",{className:"fas fa-pencil-alt"})}),Object(O.jsx)("button",{onClick:function(){return N(function(e){var t=e.id_book;return{type:l,payload:{id_book:t}}}({id_book:u}))},children:Object(O.jsx)("i",{className:"fas fa-times"})})]}),Object(O.jsxs)("button",{className:"addComment",onClick:y,children:[" ",h?"Cancel":"Add comment"]})]});return Object(O.jsxs)("div",{className:"element",children:[Object(O.jsxs)("div",{className:"books",children:[Object(O.jsx)("h2",{children:t}),Object(O.jsx)("h3",{children:c}),Object(O.jsx)("table",{children:Object(O.jsxs)("tbody",{children:[Object(O.jsxs)("tr",{children:[Object(O.jsx)("td",{children:"Category"}),Object(O.jsx)("td",{children:"Public year"}),Object(O.jsx)("td",{children:"Price"}),Object(O.jsx)("td",{children:"Pages"})]}),Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{children:o}),Object(O.jsx)("th",{children:r}),Object(O.jsxs)("th",{children:[a," $"]}),Object(O.jsx)("th",{children:b})]})]})}),Object(O.jsx)("p",{children:"Description:"}),Object(O.jsx)("p",{className:"textarea",children:m}),E]}),Object(O.jsx)("div",{className:"comments",children:C.filter((function(e){return e.props.id_book===u}))}),h?Object(O.jsx)(A,{id_book:u,callbackAdd:y}):null]})},R=function(){var e=Object(i.c)((function(e){return e.books})),t=e.books.map((function(e){return Object(O.jsx)(E,Object(x.a)({},e),e.id_book)}));return Object(O.jsx)("div",{children:t})},D=function(){return Object(O.jsx)(i.a,{store:C,children:Object(O.jsxs)("div",{children:[Object(O.jsx)("header",{children:Object(O.jsx)("h1",{children:"Book corner"})}),Object(O.jsx)(p,{}),Object(O.jsx)(R,{}),Object(O.jsx)("footer",{children:Object(O.jsx)("p",{children:"\xa9 Adam Modzelewski "})})]})})};r.a.render(Object(O.jsx)(o.a.StrictMode,{children:Object(O.jsx)(D,{})}),document.getElementById("root"))}},[[28,1,2]]]);
//# sourceMappingURL=main.fdfbd38b.chunk.js.map